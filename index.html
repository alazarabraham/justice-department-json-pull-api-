<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
</head>

<body>
    <button id="fetchbutton">Get Justice Department Stories</button>
    <ul id="output"></ul>
    <form>
        Enter Search:<br>
        <input type="text" name="firstname"><br>
    </form>

    <script type="text/javascript">
        document.getElementById("fetchbutton").addEventListener("click", getData);
        const output = document.getElementById("output");
        // // document.getElementById("submit").addEventListener("submit", submitData)

        // function getData() {
        //     const response =  fetch('`https://cors-anywhere.herokuapp.com/https://www.justice.gov/api/v1/press_releases');
        //     const myJson =  response.json();
        //     console.log(JSON.stringify(myJson));
        // }

        // function getData(url = '', data = {},response) {
        //     url = `https://cors-anywhere.herokuapp.com/https://www.justice.gov/api/v1/press_releases`
        //     const response =  fetch(url, {
        //         method: 'GET', // *GET, POST, PUT, DELETE, etc.
        //         mode: 'cors', // no-cors, *cors, same-origin
        //         cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        //         credentials: 'same-origin', // include, *same-origin, omit
        //         headers: {
        //             'Content-Type': 'application/json'
        //             // 'Content-Type': 'application/x-www-form-urlencoded',
        //         },
        //         redirect: 'follow', // manual, *follow, error
        //         referrer: 'no-referrer', // no-referrer, *client
        //         body: JSON.stringify(data) // body data type must match "Content-Type" header
        //     });
        //     console.log(response.json());

        // }

                function getData() {

                    fetch(`https://cors-anywhere.herokuapp.com/https://www.justice.gov/api/v1/press_releases.json
        `)
                        .then(response => response.json())
                        .then(text => {
                                // console.log(text.results[0]['body']);
                                const results = text.results;
                                // results.forEach(element => {
                                //     // console.log(element.body);
                                //     // output.innerHTML += element.body;
                                // });
                                for(i=0;i<results.length;i++){
                                    const data = results[i].body;
                                    // const dataSplitUp = data.split("<p>");
                                    //     console.log(dataSplitUp);
                                    output.innerHTML += data;


                                // }

                                }
                            }

                        )
        // const resultsString = results.split("<p>");
        // for (let j = 0; j < ingredientsArray.length; j++) {}

        };
        // getData();
        //     async function edgar (){
        //     const response = await fetch('https://cors-anywhere.herokuapp.com/https://datafied.api.edgar-online.com/v2/corefinancials/ann?primarysymbols=msft&sortby=periodenddate&appkey=f9c4cfa7f15905cb571ae1d8093f05ee');
        //     const myJson = await response.json();
        //     console.log(JSON.stringify(myJson));
        // }
        // function edgar() {
        //     $.ajax({
        //         url: 'https://cors-anywhere.herokuapp.com/https://datafied.api.edgar-online.com/v2/companies?Appkey=f9c4cfa7f15905cb571ae1d8093f05ee&companynames=APPLE%20INC,MICROSOFT&deleted=false&limit=100&sortby=primarysymbol%20asc',
        //         type: 'GET',
        //         crossDomain: true,
        //         success: function (response) {
        //             console.log(response);
        //         },
        //         error: function (request, error) {
        //             alert("Request: " + JSON.stringify(request));
        //         }
        //     });
        // }
        // edgar();
    </script>

</body>

</html>